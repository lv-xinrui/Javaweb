<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>课表查询 - 文华学院</title>
    <link href="https://cdn.bootcdn.net/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
</head>

<body>
    <!-- 导航栏 -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="fas fa-university me-2"></i>文华学院
            </a>
            <div class="navbar-nav me-auto">
                <a class="nav-link" href="/student/dashboard">
                    <i class="fas fa-home me-1"></i>仪表板
                </a>
            </div>
            <div class="navbar-nav">
                <span class="navbar-text me-3">
                    <i class="fas fa-user me-1"></i>
                    <span th:text="${student.name}"></span>
                </span>
                <a class="nav-link" href="/student/logout">
                    <i class="fas fa-sign-out-alt me-1"></i>退出
                </a>
            </div>
        </div>
    </nav>

    <!-- 主要内容 -->
    <div class="container my-4">
        <!-- 页面标题 -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="d-flex justify-content-between align-items-center">
                    <h2>
                        <i class="fas fa-calendar-alt me-3"></i>课表查询
                    </h2>
                    <div>
                        <a href="/student/schedule/all" class="btn btn-outline-primary">
                            <i class="fas fa-list me-1"></i>所有课表
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- 学期选择 -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <form method="get" th:action="@{/student/schedule}">
                            <div class="row align-items-end">
                                <div class="col-md-4">
                                    <label for="semester" class="form-label">选择学期</label>
                                    <select class="form-select" id="semester" name="semester">
                                        <option value="">当前学期</option>
                                        <option value="2024春季" th:selected="${currentSemester == '2024春季'}">2024春季
                                        </option>
                                        <option value="2023秋季" th:selected="${currentSemester == '2023秋季'}">2023秋季
                                        </option>
                                        <option value="2023春季" th:selected="${currentSemester == '2023春季'}">2023春季
                                        </option>
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    <button type="submit" class="btn btn-primary w-100">
                                        <i class="fas fa-search me-1"></i>查询
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- 课表内容 -->
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">
                            <i class="fas fa-calendar me-2"></i>
                            课表信息
                            <span th:if="${currentSemester}" th:text="' - ' + ${currentSemester}"></span>
                        </h5>
                    </div>
                    <div class="card-body">
                        <div th:if="${schedules != null and !schedules.empty}">
                            <!-- 课表表格 -->
                            <div class="table-responsive">
                                <table class="table table-bordered table-hover">
                                    <thead class="table-light">
                                        <tr>
                                            <th width="10%">星期</th>
                                            <th width="15%">时间</th>
                                            <th width="20%">课程名称</th>
                                            <th width="15%">课程代码</th>
                                            <th width="15%">授课教师</th>
                                            <th width="10%">学分</th>
                                            <th width="15%">教室</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr th:each="schedule : ${schedules}">
                                            <td>
                                                <span th:switch="${schedule.weekDay}">
                                                    <span th:case="1" class="badge bg-danger">周一</span>
                                                    <span th:case="2" class="badge bg-warning">周二</span>
                                                    <span th:case="3" class="badge bg-info">周三</span>
                                                    <span th:case="4" class="badge bg-success">周四</span>
                                                    <span th:case="5" class="badge bg-primary">周五</span>
                                                    <span th:case="6" class="badge bg-secondary">周六</span>
                                                    <span th:case="7" class="badge bg-dark">周日</span>
                                                </span>
                                            </td>
                                            <td>
                                                <span
                                                    th:text="${#temporals.format(schedule.startTime, 'HH:mm')}"></span>
                                                -
                                                <span th:text="${#temporals.format(schedule.endTime, 'HH:mm')}"></span>
                                            </td>
                                            <td>
                                                <strong
                                                    th:text="${schedule.course != null ? schedule.course.courseName : '课程'}"></strong>
                                                <br>
                                                <small class="text-muted"
                                                    th:text="${schedule.course != null ? schedule.course.courseType : ''}"></small>
                                            </td>
                                            <td th:text="${schedule.course != null ? schedule.course.courseCode : ''}">
                                            </td>
                                            <td th:text="${schedule.course != null ? schedule.course.teacherName : ''}">
                                            </td>
                                            <td>
                                                <span class="badge bg-light text-dark"
                                                    th:text="${schedule.course != null ? schedule.course.credits : 0}"></span>
                                            </td>
                                            <td>
                                                <i class="fas fa-map-marker-alt me-1"></i>
                                                <span th:text="${schedule.classroom}"></span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div th:if="${schedules == null or schedules.empty}" class="text-center text-muted py-5">
                            <i class="fas fa-calendar-times fa-3x mb-3"></i>
                            <h5>暂无课表信息</h5>
                            <p>请选择其他学期或联系教务部门</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 页脚 -->
    <footer class="bg-dark text-light py-4 mt-5">
        <div class="container text-center">
            <p>&copy; 2024 文华学院 学生管理系统</p>
        </div>
    </footer>

    <script src="https://cdn.bootcdn.net/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
</body>

</html>